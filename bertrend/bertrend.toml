#  Copyright (c) 2024, RTE (https://www.rte-france.com)
#  See AUTHORS.txt
#  SPDX-License-Identifier: MPL-2.0
#  This file is part of BERTrend.

# BERTopic Hyperparameters
[bertopic_parameters]
umap_n_components = 5
umap_n_neighbors = 5
umap_min_dist = 0.0
hdbscan_min_cluster_size = 5
hdbscan_min_samples = 5
top_n_words = 10
min_df = 1
granularity = 2
min_similarity = 0.7
zeroshot_min_similarity = 0.5
bertopic_serialization = "safetensors"  # or pickle
mmr_diversity = 0.3
outlier_reduction_strategy = "c-tf-idf"  # or "embeddings"
# other constants
zeroshot_topics = []  # default list of topics
language="French" # or "English"
representation_models=["MaximalMarginalRelevance"] # and / or "KeyBERTInspired", "OpenAI"

# BERTrend Hyperparameters
[bertrend_parameters]
# signal classification settings
signal_classif_lower_bound = 10
signal_classif_upper_bound = 75

# Embedding service parameters
[embedding_service]
# Indicates if BERTrend shall use local embedding service (run by BERTrend) or if the embedding service
# is delegated to an external service. If set to false, the other properties shall be set properly.
# It is generally more efficient to use a dedicated service for embeddings.
use_local = true
model_name = "OrdalieTech/Solon-embeddings-large-0.1"
host = "10.132.6.110"
port = 6464

# LLM service parameters
[llm_service]
# Specifies here the information about the LLM to be used to benefit from some LLM features such as
# improved topic description and topic analysis over time
# If empty, these features will not be available
# BERTrend can use any kind of openai-compatible deployment such as:
# - local LLM deployed with VLLM or similar libraries
# - the official OpenAI endpoint
# - models deployed on Azure cloud
api_key = "$AZURE_SE_WATTELSE_OPENAI_API_KEY_DEV"
endpoint = "$AZURE_SE_WATTELSE_OPENAI_ENDPOINT_DEV"
model = "$AZURE_SE_WATTELSE_OPENAI_DEFAULT_MODEL_NAME_DEV"
temperature = 0.1
max_tokens = 2048
system_prompt = "You are a helpful assistant, skilled in detailing topic evolution over time for the detection of emerging trends and signals."
